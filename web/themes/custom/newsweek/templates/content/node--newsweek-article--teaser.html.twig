{%
  set classes = [
  'node',
  'node--type-' ~ node.bundle|clean_class,
  node.isPromoted() ? 'node--promoted',
  node.isSticky() ? 'node--sticky',
  not node.isPublished() ? 'node--unpublished',
  view_mode ? 'node--view-mode-' ~ view_mode|clean_class,
  'clearfix',
]
%}

{%
  set images_style = {
  '#theme':      'image_style',
  '#style_name': 'teaser',
  '#uri':        node.field_main_image.entity.field_media_image.entity.fileuri,
}
%}

{{ attach_library('bartik/classy.node') }}
<article{{ attributes.addClass(classes) }}>
  <header>

  {{ images_style }}
  {{ content.field_tags }}

    {{ title_prefix }}
    {% if label and not page %}
      <h2{{ title_attributes.addClass('node__title') }}>
        <a href="{{ url }}" rel="bookmark">{{ label }}</a>
      </h2>
    {% endif %}
    {{ title_suffix }}

  </header>
  <div{{ content_attributes.addClass('node__content', 'clearfix') }}>
    {{ content | without ('field_tags', 'field_main_image') }}
  </div>
</article>
